<script src="//cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.7/p5.js"></script>

<script>
    let shadeOfGray;

    function setup() {
        createCanvas(800, 600);
    }

    function draw() {
        //noprotect
        background(100);

        let k = 256 / width;

        for (let x = 0; x < width; x++) {
            shadeOfGray = color(k * x);
            for (let y = 0; y < height; y++){
                set(x, y, shadeOfGray);
            }
        }
        updatePixels();
    }
</script>